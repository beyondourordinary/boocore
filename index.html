<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#000000" />

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="BOOCore" />

<title>BOOCore</title>

<!-- Barrio font -->
<link href="https://fonts.googleapis.com/css2?family=Barrio&display=swap" rel="stylesheet">

<style>
:root{
  --boo:#FAFF00;
  --white:rgba(255,255,255,0.9);
  --muted:rgba(255,255,255,0.6);
}

/* RESET */
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{
  height:100%;
  margin:0;
  font-family:'Barrio', system-ui, -apple-system, Segoe UI, Roboto, Arial;
}
body{
  background:#000;
  overflow:hidden;
  color:var(--white);
}

/* ===== BACKGROUND ===== */
.bg{
  position:fixed;
  inset:0;
  background-image:url("./boocore-bg.png");
  background-repeat:no-repeat;
  background-size:contain;
  background-position:center top;
  background-color:#000;
  filter:contrast(1.08) brightness(0.78) saturate(1.12);
  animation:slowDrift 18s ease-in-out infinite alternate;
  z-index:0;
}
@keyframes slowDrift{
  from{transform:translateY(-6px)}
  to{transform:translateY(6px)}
}

.overlay{
  position:fixed;
  inset:0;
  background:
    radial-gradient(800px 400px at 50% 15%, rgba(250,255,0,0.18), transparent 60%),
    radial-gradient(1200px 800px at 50% 50%, transparent 40%, rgba(0,0,0,0.75) 100%);
  z-index:1;
}

/* ===== APP FRAME ===== */
.app{
  position:relative;
  z-index:2;
  height:100dvh;
}

/* ===== TOP BAR ===== */
.top{
  position:fixed;
  top:0; left:0; right:0;
  z-index:5;

  padding-top: calc(env(safe-area-inset-top) + 10px);
  padding-bottom: 10px;
  padding-left:18px;
  padding-right:18px;

  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;

  background:linear-gradient(180deg, rgba(0,0,0,0.65), rgba(0,0,0,0));
  backdrop-filter:blur(6px);
}

.top-title{
  grid-column:2;
  justify-self:center;
  color:var(--boo);
  font-weight:900;
  letter-spacing:6px;
  font-size:clamp(30px,6vw,48px);
  text-transform:uppercase;
  text-shadow:0 0 18px rgba(250,255,0,0.25);
}

.settings{
  grid-column:3;
  justify-self:end;
  width:42px;height:42px;
  border-radius:50%;
  background:rgba(0,0,0,0.45);
  border:1px solid rgba(255,255,255,0.15);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
}

/* ===== BOTTOM BAR ===== */
.bottom{
  position:fixed;
  left:0; right:0; bottom:0;
  z-index:5;

  padding-top:10px;
  padding-bottom: calc(env(safe-area-inset-bottom) + 14px);
  padding-left:18px;
  padding-right:18px;

  display:flex;
  justify-content:center;

  background:linear-gradient(0deg, rgba(0,0,0,0.70), rgba(0,0,0,0));
  backdrop-filter:blur(6px);
}

.cta{
  max-width: 320px;
  padding:14px 20px;
  border-radius:18px;
  border:2px solid rgba(250,255,0,0.6);
  background:rgba(0,0,0,0.45);

  color:var(--boo);
  font-weight:800;
  font-size:13px;              /* üëà smaller text */
  letter-spacing:1px;          /* üëà tighter spacing */
  text-transform:uppercase;
  text-decoration:none;

  text-align:center;           /* üëà central wrap */
  line-height:1.4;             /* üëà nice multi-line spacing */
}

/* ===== CENTRE ===== */
.center{
  height:100dvh;
  padding-left:18px;
  padding-right:18px;

  padding-top: calc(env(safe-area-inset-top) + 96px);
  padding-bottom: calc(env(safe-area-inset-bottom) + 120px);

  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  gap:16px;
}

.now{
  font-size:clamp(48px,11vw,88px);
  letter-spacing:7px;
  font-weight:900;
  text-transform:uppercase;
  color:var(--boo);
  opacity:0;
  filter:blur(12px);
}

.mist{
  animation:mistIn 1.8s ease-out forwards;
}
@keyframes mistIn{
  0%{opacity:0;filter:blur(14px);transform:translateY(6px)}
  60%{opacity:0.75;filter:blur(4px)}
  100%{opacity:1;filter:blur(0);transform:translateY(0)}
}

/* ===== HISTORY ===== */
.stack{
  width:min(420px,90vw);
  margin-top:14px;
  padding:14px 10px;
  border-radius:18px;
  background:rgba(0,0,0,0.25);
  border:1px solid rgba(255,255,255,0.08);
  display:flex;
  flex-direction:column;
  gap:8px;

  max-height:46vh;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
}

.item{
  text-align:center;
  font-weight:700;
  letter-spacing:3px;
  text-transform:uppercase;
  font-size:13px;
  color:rgba(255,255,255,0.65);
}

/* fade older (12 items) */
.item:nth-child(1){opacity:1}
.item:nth-child(2){opacity:.85}
.item:nth-child(3){opacity:.75}
.item:nth-child(4){opacity:.65}
.item:nth-child(5){opacity:.55}
.item:nth-child(6){opacity:.45}
.item:nth-child(7){opacity:.35}
.item:nth-child(8){opacity:.30}
.item:nth-child(9){opacity:.26}
.item:nth-child(10){opacity:.22}
.item:nth-child(11){opacity:.18}
.item:nth-child(12){opacity:.14}

/* modal */
.modal{
  position:fixed;inset:0;
  display:none;
  align-items:flex-end;
  background:rgba(0,0,0,.6);
  z-index:10;
}
.modal.open{display:flex}

.sheet{
  width:100%;
  max-width:520px;
  margin:auto;
  background:rgba(10,10,10,.9);
  border-radius:22px;
  padding:18px;
  border:1px solid rgba(255,255,255,.15);
}

.sheet button{
  width:100%;
  padding:14px;
  margin-top:10px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.2);
  background:#000;
  color:var(--white);
  font-weight:900;
  text-transform:uppercase;
}
</style>
</head>

<body>
<div class="bg"></div>
<div class="overlay"></div>

<div class="app">

  <div class="top">
    <div></div>
    <div class="top-title">BOOCORE</div>
    <button class="settings" id="openSettings">‚öôÔ∏è</button>
  </div>

  <div class="center">
    <div id="now" class="now">‚Äî</div>
    <div id="stack" class="stack"></div>
  </div>

  <div class="bottom">
    <a class="cta" href="https://beyondourordinary.shop" target="_blank" rel="noopener noreferrer">
      IF YOU LIKE THIS APP,         BUY THE DEVICE HERE ‚Üí
    </a>
  </div>

</div>

<div class="modal" id="modal">
  <div class="sheet">
    <button id="triggerNow">Trigger Now</button>
    <button id="clearHistory">Clear History</button>
    <button id="closeSettings">Close</button>
  </div>
</div>

<script>
let WORDS=[], lastWord=null;
const HISTORY_KEY="boocore_history";

/* trigger timing */
const MIN=5;    // seconds
const MAX=120;  // seconds

let timer=null;

const nowEl=document.getElementById("now");
const stackEl=document.getElementById("stack");

/* settings */
const modal=document.getElementById("modal");
openSettings.onclick=()=>modal.classList.add("open");
closeSettings.onclick=()=>modal.classList.remove("open");

/* helpers */
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}
function pick(){
  if(!WORDS.length) return "‚Äî";
  let w;
  do{
    w=shuffle([...WORDS])[Math.floor(Math.random()*WORDS.length)];
  }while(w===lastWord);
  lastWord=w;
  return w;
}
function history(){return JSON.parse(localStorage.getItem(HISTORY_KEY)||"[]")}
function save(h){localStorage.setItem(HISTORY_KEY,JSON.stringify(h.slice(0,40)))}

function render(){
  const h=history().slice(0,12);
  stackEl.innerHTML="";
  h.forEach(entry=>{
    const d=document.createElement("div");
    d.className="item";
    d.textContent=entry.word;
    stackEl.appendChild(d);
  });
}

function trigger(){
  const w=pick();
  nowEl.textContent=w;
  nowEl.classList.remove("mist");
  void nowEl.offsetWidth;
  nowEl.classList.add("mist");

  navigator.vibrate?.(80);

  const h=history();
  h.unshift({word:w,time:Date.now()});
  save(h);
  render();
}

function schedule(){
  clearTimeout(timer);
  timer=setTimeout(()=>{trigger();schedule()}, (Math.random()*(MAX-MIN)+MIN)*1000 );
}

/* buttons */
triggerNow.onclick=()=>{trigger();modal.classList.remove("open")}
clearHistory.onclick=()=>{localStorage.removeItem(HISTORY_KEY);render();modal.classList.remove("open")}

/* init */
(async()=>{
  try{
    const r=await fetch("./words.txt",{cache:"no-store"});
    WORDS=(await r.text()).split(/\r?\n/).map(x=>x.trim()).filter(Boolean);
  }catch{
    WORDS=["stay","listen","behind","cellar","window","doom"];
  }
  render();
  schedule();
})();
</script>
</body>
</html>
