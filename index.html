<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#000000" />

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="BOOCore" />

<title>BOOCore</title>

<style>
:root{
  --boo:#FAFF00;
  --white:rgba(255,255,255,0.9);
  --muted:rgba(255,255,255,0.6);
}

/* RESET */
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
body{background:#000;overflow:hidden;color:var(--white)}

/* ===== BACKGROUND ===== */
.bg{
  position:fixed;
  inset:0;
  background-image:url("./boocore-bg.png");
  background-repeat:no-repeat;
  background-size:contain;
  background-position:center top;
  background-color:#000;
  filter:contrast(1.15) brightness(0.62) saturate(1.1);
  animation:slowDrift 18s ease-in-out infinite alternate;
  z-index:0;
}

@keyframes slowDrift{
  from{transform:translateY(-6px)}
  to{transform:translateY(6px)}
}

/* vignette + glow */
.overlay{
  position:fixed;
  inset:0;
  background:
    radial-gradient(800px 400px at 50% 15%, rgba(250,255,0,0.18), transparent 60%),
    radial-gradient(1200px 800px at 50% 50%, transparent 40%, rgba(0,0,0,0.9) 100%);
  z-index:1;
}

/* ===== LAYOUT ===== */
.screen{
  position:relative;
  z-index:2;
  height:100vh;
  display:grid;
  grid-template-rows:auto 1fr auto;
  padding:20px;
}

/* top bar */
.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.top-title{
  color:var(--boo);
  font-weight:900;
  letter-spacing:3px;
  font-size:18px;
  text-transform:uppercase;
}

.settings{
  width:42px;height:42px;
  border-radius:50%;
  background:rgba(0,0,0,0.4);
  border:1px solid rgba(255,255,255,0.15);
  display:flex;align-items:center;justify-content:center;
  font-size:18px;
}

/* centre */
.center{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  gap:14px;
}

.current{
  font-size:12px;
  letter-spacing:2px;
  text-transform:uppercase;
  color:var(--muted);
}

.now{
  font-size:clamp(28px,6vw,52px);
  letter-spacing:3px;
  font-weight:900;
  text-transform:uppercase;
  color:var(--boo);
}

/* history stack */
.stack{
  width:min(420px,90vw);
  margin-top:10px;
  padding:14px 10px;
  border-radius:18px;
  background:rgba(0,0,0,0.25);
  border:1px solid rgba(255,255,255,0.08);
  backdrop-filter:blur(6px);
  display:flex;
  flex-direction:column;
  gap:8px;
}

.item{
  text-align:center;
  font-weight:900;
  letter-spacing:2.4px;
  text-transform:uppercase;
  font-size:14px;
  color:rgba(255,255,255,0.65);
}

/* fade older */
.item:nth-child(1){opacity:.35}
.item:nth-child(2){opacity:.45}
.item:nth-child(3){opacity:.55}
.item:nth-child(4){opacity:.65}
.item:nth-child(5){opacity:.75}
.item:nth-child(6){opacity:.85}
.item:nth-child(7){opacity:.95}

/* bottom */
.bottom{
  display:flex;
  justify-content:center;
  padding-bottom:env(safe-area-inset-bottom);
}

.cta{
  padding:16px 26px;
  border-radius:18px;
  border:2px solid rgba(250,255,0,0.6);
  background:rgba(0,0,0,0.4);
  color:var(--boo);
  font-weight:950;
  letter-spacing:1.8px;
  text-transform:uppercase;
  text-decoration:none;
  display:inline-block;
}

.cta:active{
  transform:scale(0.96);
  box-shadow:0 0 20px rgba(250,255,0,0.35);
}

/* impact */
.glitch{animation:glitch .22s steps(2,end) 2}
@keyframes glitch{
  0%{transform:translate(0,0)}
  20%{transform:translate(-2px,1px)}
  40%{transform:translate(2px,-1px)}
  60%{transform:translate(-2px,0)}
  80%{transform:translate(1px,-2px)}
  100%{transform:translate(0,0)}
}

.shift{animation:shift .12s ease-out}
@keyframes shift{
  50%{transform:translate(-2px,1px)}
}

/* modal */
.modal{
  position:fixed;inset:0;
  display:none;
  align-items:flex-end;
  background:rgba(0,0,0,.6);
  z-index:10;
}
.modal.open{display:flex}

.sheet{
  width:100%;
  max-width:520px;
  margin:auto;
  background:rgba(10,10,10,.9);
  border-radius:22px;
  padding:18px;
  border:1px solid rgba(255,255,255,.15);
}

.sheet button{
  width:100%;
  padding:14px;
  margin-top:10px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.2);
  background:#000;
  color:var(--white);
  font-weight:900;
  text-transform:uppercase;
}
</style>
</head>

<body>
<div class="bg"></div>
<div class="overlay"></div>

<div class="screen" id="screen">
  <div class="top">
    <div class="top-title">BOOCore</div>
    <button class="settings" id="openSettings">⚙️</button>
  </div>

  <div class="center">
    <div class="current">Current</div>
    <div id="now" class="now">—</div>
    <div id="stack" class="stack"></div>
  </div>

  <div class="bottom">
    <a
      class="cta"
      href="https://beyondourordinary.shop"
      target="_blank"
      rel="noopener noreferrer"
    >
      SHOP BOO →
    </a>
  </div>
</div>

<div class="modal" id="modal">
  <div class="sheet">
    <button id="triggerNow">Trigger Now</button>
    <button id="clearHistory">Clear History</button>
    <button id="closeSettings">Close</button>
  </div>
</div>

<script>
let WORDS=[], lastWord=null;
const HISTORY_KEY="boocore_history";
const MIN=10, MAX=45;
let timer=null;

const nowEl=document.getElementById("now");
const stackEl=document.getElementById("stack");
const screen=document.getElementById("screen");

/* settings */
const modal=document.getElementById("modal");
openSettings.onclick=()=>modal.classList.add("open");
closeSettings.onclick=()=>modal.classList.remove("open");

/* helpers */
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function pick(){
  if(!WORDS.length) return "—";
  let w;
  do{
    w=shuffle([...WORDS])[Math.floor(Math.random()*WORDS.length)];
  }while(w===lastWord);
  lastWord=w;
  return w;
}

function history(){return JSON.parse(localStorage.getItem(HISTORY_KEY)||"[]")}
function save(h){localStorage.setItem(HISTORY_KEY,JSON.stringify(h.slice(0,40)))}

function render(){
  const h=history().slice(0,7).reverse();
  stackEl.innerHTML="";
  const pad=Array(7).fill("");
  for(let i=0;i<h.length;i++) pad[7-h.length+i]=h[i].word;
  pad.forEach(w=>{
    const d=document.createElement("div");
    d.className="item";
    d.textContent=w;
    stackEl.appendChild(d);
  });
}

function trigger(){
  screen.classList.remove("shift");void screen.offsetWidth;screen.classList.add("shift");
  const w=pick();
  nowEl.textContent=w;
  nowEl.classList.remove("glitch");void nowEl.offsetWidth;nowEl.classList.add("glitch");
  navigator.vibrate?.(80);
  const h=history();
  h.unshift({word:w,time:Date.now()});
  save(h);
  render();
}

function schedule(){
  clearTimeout(timer);
  timer=setTimeout(()=>{trigger();schedule()},(Math.random()*(MAX-MIN)+MIN)*1000);
}

/* buttons */
triggerNow.onclick=()=>{trigger();modal.classList.remove("open")}
clearHistory.onclick=()=>{localStorage.removeItem(HISTORY_KEY);render();modal.classList.remove("open")}

/* init */
(async()=>{
  try{
    const r=await fetch("./words.txt",{cache:"no-store"});
    WORDS=(await r.text()).split(/\r?\n/).map(x=>x.trim()).filter(x=>x);
  }catch{WORDS=["stay","listen","behind","cellar","window","doom"]}

  render();
  schedule();
})();
</script>
</body>
</html>
