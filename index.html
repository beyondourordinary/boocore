<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>BOOCore</title>

  <!-- Google Fonts (Safari safe) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Barrio (main word) -->
  <link href="https://fonts.googleapis.com/css2?family=Barrio&display=swap" rel="stylesheet">

  <!-- Inter (history / UI) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      height: 100vh;
      background: url("boocore-bg.png") center/cover no-repeat fixed;
      color: white;
      font-family: 'Inter', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      text-align: center;
      backdrop-filter: brightness(0.8);
    }

    #title {
      margin-top: 20px;
      font-family: 'Barrio', cursive;
      font-size: 3.2rem;
      letter-spacing: 0.2em;
    }

    #main {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    #currentWord {
      font-family: 'Barrio', cursive;
      font-size: 3.5rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin-bottom: 20px;
    }

    /* Wobble animation */
    @keyframes boocoreWobble {
      0%   { transform: translate(0,0) rotate(0deg); }
      20%  { transform: translate(-1px,1px) rotate(-0.4deg); }
      40%  { transform: translate(1px,-1px) rotate(0.4deg); }
      60%  { transform: translate(-1px,0) rotate(-0.2deg); }
      80%  { transform: translate(1px,0) rotate(0.2deg); }
      100% { transform: translate(0,0) rotate(0deg); }
    }

    .wobble {
      animation: boocoreWobble 220ms ease-out;
    }

    #history {
      width: 80%;
      max-width: 400px;
      margin-top: 10px;
      font-size: 0.85rem;
      opacity: 0.85;
    }

    .history-item {
      margin: 4px 0;
    }

    #controls {
      margin-bottom: 10px;
    }

    button {
      background: rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.4);
      color: white;
      padding: 10px 20px;
      margin: 6px;
      font-size: 1rem;
      border-radius: 6px;
    }

    #shop {
      font-size: 0.75rem;
      opacity: 0.7;
      margin-bottom: 14px;
      max-width: 80%;
    }

    #shop a {
      color: white;
      text-decoration: none;
    }
  </style>
</head>

<body>

  <div id="title">BOOCORE</div>

  <div id="main">
    <div id="currentWord">â€”</div>

    <div id="history"></div>
  </div>

  <div id="controls">
    <button onclick="triggerWord()">LISTEN</button>
  </div>

  <div id="shop">
    <a href="https://beyondourordinary.shop" target="_blank">
      If you like this app, buy the device here!
    </a>
  </div>

  <!-- Word packs (GLOBAL) -->
  <script src="./boocore_words_packs.js"></script>

  <script>
    let history = [];

    function buildCandidatePool() {
      let pool = [];

      pool.push(...BOOCoreWords.CORE_WORDS);
      pool.push(...BOOCoreWords.PLACES);

      if (Math.random() < 0.4) pool.push(...BOOCoreWords.TONE_TRAITS);
      if (Math.random() < 0.15) pool.push(...BOOCoreWords.PHRASES_MANIFESTATIONS);

      return pool;
    }

    function displayWord(word) {
      const el = document.getElementById("currentWord");

      el.classList.remove("wobble");
      void el.offsetWidth; // Safari reflow
      el.textContent = word;
      el.classList.add("wobble");
    }

    function addToHistory(word) {
      history.unshift(word);
      if (history.length > 8) history.pop();

      const historyEl = document.getElementById("history");
      historyEl.innerHTML = history.map(w => `<div class="history-item">${w}</div>`).join("");
    }

    function triggerWord() {
      const pool = buildCandidatePool();
      const word = pool[Math.floor(Math.random() * pool.length)];

      displayWord(word);
      addToHistory(word);
    }
  </script>

</body>
</html>
